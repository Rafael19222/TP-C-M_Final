{% extends 'base.html.twig' %}

{% block title %}Mon Profil{% endblock %}

{% block body %}
<div class="container" style="max-width: 600px;">
    <h1>Mon Profil</h1>

    <div class="card" style="margin: 2rem 0;">
        <p style="margin-bottom: 0.75rem;"><strong>Nom d'utilisateur :</strong> {{ user.username }}</p>
        <p style="margin-bottom: 0.75rem;"><strong>Email :</strong> {{ user.email }}</p>
        <p><strong>Rôles :</strong> {{ user.roles|join(', ') }}</p>
    </div>

    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <a href="{{ path('app_profile_edit') }}" class="btn btn-primary">
            Modifier mon profil
        </a>
        <a href="{{ path('app_home') }}" class="btn btn-secondary">
            Retour à l'accueil
        </a>
    </div>

    <div class="card" style="margin-top: 3rem; border: 1px solid #f5c6cb;">
        <details>
            <summary style="cursor: pointer; color: #721c24; font-weight: 600;">Zone dangereuse</summary>
            <div style="margin-top: 1rem;">
                <p style="color: #666; margin-bottom: 1rem;">Attention : Cette action est irréversible. Votre compte sera définitivement supprimé.</p>
                <form method="post" action="{{ path('app_profile_delete') }}" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer votre compte ? Cette action est irréversible.');">
                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ user.id) }}">
                    <button type="submit" style="padding: 0.75rem 1.5rem; background-color: #dc3545; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 500;">
                        Supprimer mon compte
                    </button>
                </form>
            </div>
        </details>
    </div>
</div>
{% endblock %}
